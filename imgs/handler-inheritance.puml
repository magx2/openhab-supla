@startuml
skinparam classAttributeIconSize 0
skinparam linetype ortho

top to bottom direction

skinparam class {
  BackgroundColor<<OpenHAB>> HoneyDew
  BackgroundColor<<Supla>> Cornsilk
}

' Core OpenHAB abstractions (kept at the top)
interface ThingHandler <<OpenHAB>>
interface BridgeHandler <<OpenHAB>>
abstract class BaseThingHandler <<OpenHAB>>
abstract class BaseBridgeHandler <<OpenHAB>>

' Supla traits and shared interfaces
interface HandleCommand <<Supla>>
interface HandleProto <<Supla>>
interface SuplaDevice <<Supla>>
interface SuplaThing <<Supla>>
interface SuplaThingRegistry <<Supla>>
interface SuplaBridge <<Supla>>

' Device handler hierarchy
abstract class AbstractDeviceHandler <<Supla>>
abstract class ServerAbstractDeviceHandler <<Supla>>
class GatewayDeviceHandler <<Supla>>
class SingleDeviceHandler <<Supla>>
class SubDeviceHandler <<Supla>>
class CloudDeviceHandler <<Supla>>

' Bridge handler hierarchy
class CloudBridgeHandler <<Supla>>
class ServerBridgeHandler <<Supla>>

' OpenHAB core relationships
ThingHandler <|.. BaseThingHandler
ThingHandler <|.. BridgeHandler
BridgeHandler <|.. BaseBridgeHandler

' Device handler relationships
BaseThingHandler <|-- AbstractDeviceHandler
AbstractDeviceHandler <|-- ServerAbstractDeviceHandler
AbstractDeviceHandler <|-- SubDeviceHandler
AbstractDeviceHandler <|-- CloudDeviceHandler
ServerAbstractDeviceHandler <|-- GatewayDeviceHandler
ServerAbstractDeviceHandler <|-- SingleDeviceHandler

' Supla trait implementations (device side)
HandleCommand <|.. AbstractDeviceHandler
HandleCommand <|.. SubDeviceHandler
HandleCommand <|.. SingleDeviceHandler
HandleCommand <|.. GatewayDeviceHandler
HandleProto <|.. ServerAbstractDeviceHandler
HandleProto <|.. SingleDeviceHandler
HandleProto <|.. GatewayDeviceHandler
HandleCommand <|-- SuplaDevice
HandleProto <|-- SuplaDevice
SuplaDevice <|.. SubDeviceHandler
SuplaDevice <|.. SingleDeviceHandler
SuplaDevice <|.. GatewayDeviceHandler
SuplaThing <|.. ServerAbstractDeviceHandler

' Bridge handler relationships
BaseBridgeHandler <|-- CloudBridgeHandler
BaseBridgeHandler <|-- ServerBridgeHandler
BridgeHandler <|.. SuplaBridge
SuplaBridge <|.. GatewayDeviceHandler
SuplaBridge <|.. ServerBridgeHandler
SuplaThingRegistry <|.. ServerBridgeHandler
@enduml
